{% load static %}
{% load i18n %}
<div class="u-align-center-sm u-align-center-xs u-section-row" data-animation-name="" data-animation-duration="0"
    data-animation-delay="0" data-animation-direction="">
    <div class="u-clearfix u-sheet u-valign-middle-md u-valign-middle-sm u-valign-middle-xs u-sheet-1">
        <a href="{% url 'home' %}" class="u-image u-logo u-image-1" data-image-width="612" data-image-height="408"
            title="Головна">
            <img src="{% static 'images/Logo.png' %}" class="u-logo-image u-logo-image-1">
        </a>
        
        <div class="u-clearfix u-group-elements u-valign-middle-lg u-group-elements-1">
            <!-- Соціальні мережі -->
            <div class="u-clearfix u-group-elements u-valign-middle u-group-elements-2" title="">
                <div class="u-social-icons u-social-icons-1">
                    <a class="u-social-url" title="facebook" target="_blank" href="">
                        <span class="u-icon u-social-facebook u-social-icon u-icon-1">
                            <image src="{% static 'images/icons8-facebook-новый.svg' %}">
                        </span>
                    </a>
                    <a class="u-social-url" title="twitter" target="_blank" href="">
                        <span class="u-icon u-social-icon u-social-twitter u-icon-2">
                            <image src="{% static 'images/icons8-твиттер-в-круге.svg' %}">
                        </span>
                    </a>
                    <a class="u-social-url" title="instagram" target="_blank" href="">
                        <span class="u-icon u-social-icon u-social-instagram u-icon-3">
                            <image src="{% static 'images/icons8-instagram.svg' %}">
                        </span>
                    </a>
                </div>
            </div>
        </div>

    <div class="language-switcher">
        <!-- Мовний перемикач -->
        <div class="u-h-spacing-12 u-language u-language-content-icon-text u-language-layout-dropdown u-v-spacing-6 u-language-1">
            <a class="u-language-active u-language-url" href="#" data-language="uk">
                <svg class="u-caret u-caret-svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px"
                    viewBox="0 0 16 16" style="fill:currentColor;" xml:space="preserve">
                    <polygon class="st0" points="8,12 2,4 14,4"></polygon>
                </svg>
                <span class="u-icon u-language-icon u-language-uk u-icon-4">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                        xml:space="preserve" class="u-svg-content" viewBox="0 0 112 112" x="0px" y="0px"
                        style="width: 1em; height: 1em;">
                        <rect y="16" fill="#4D72C0" width="112" height="40"></rect>
                        <rect y="56" fill="#F2DD30" width="112" height="40"></rect>
                    </svg>
                </span>
                {% trans " Українська" %}
            </a>
            <div class="u-border-1 u-border-grey-15 u-h-spacing-12 u-language-dropdown u-v-spacing-6 u-white">
                <a class="u-language-dropdown-url u-language-url" href="#"
                    onclick="event.preventDefault(); document.getElementById('language-uk-form').submit();">
                    <form id="language-uk-form" action="{% url 'set_language' %}" method="post" style="display:none;">
                        {% csrf_token %}
                        <input type="hidden" name="language" value="uk">
                    </form>
                    <span class="u-icon u-language-icon u-language-uk u-icon-4">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                            xml:space="preserve" class="u-svg-content" viewBox="0 0 112 112" x="0px" y="0px"
                            style="width: 1em; height: 1em;">
                            <rect y="16" fill="#4D72C0" width="112" height="40"></rect>
                            <rect y="56" fill="#F2DD30" width="112" height="40"></rect>
                        </svg>
                    </span>
                    {% trans " Українська" %}
                </a>
                <a class="u-language-dropdown-url u-language-url" href="#"
                    onclick="event.preventDefault(); document.getElementById('language-en-form').submit();">
                    <form id="language-en-form" action="{% url 'set_language' %}" method="post" style="display:none;">
                        {% csrf_token %}
                        <input type="hidden" name="language" value="en">
                    </form>
                    <span class="u-icon u-language-icon u-language-ena u-icon-6">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                            xml:space="preserve" class="u-svg-content" viewBox="0 0 112 112" x="0px" y="0px"
                            style="width: 1em; height: 1em;">
                            <path fill="#CB001C" d="M0,96h112V16H0V96z"></path>
                            <path fill="#F4F4F4"
                                d="M0,88h112v-9H0V88z M60,68h52v-9H60V68z M60,51h52v-9H60V51z M60,34h52v-9H60V34z">
                            </path>
                            <rect y="16" fill="#2A3560" width="60" height="63"></rect>
                        </svg>
                    </span>
                    {% trans " Англійська" %}
                </a>
            </div>
        </div>
        </div>

<div class="header-actions">
<!-- Віджет корзини -->
<div class="cart-widget-container">
    <div class="cart-widget" id="cart-widget">
        <a href="{% url 'shop:cart_detail' %}" class="cart-link" id="cart-link">
            <div class="cart-icon-wrapper">
                <svg class="cart-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.44C5.03 14.52 5.4 15 6 15h12v-2H6l1.1-2h7.45c.75 0 1.41-.41 1.75-1.03L18.7 4H5.21l-.94-2H1zm16 16c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                </svg>
                <span class="cart-counter" id="cart-counter">0</span>
            </div>
            <div class="cart-info">
                <span class="cart-text">{% trans "Кошик" %}</span>
                <span class="cart-total" id="cart-total">0 ₴</span>
            </div>
        </a>
        
        <!-- Dropdown з товарами -->
        <div class="cart-dropdown" id="cart-dropdown">
            <div class="cart-dropdown-header">
                <h5>{% trans "Ваш кошик" %}</h5>
            </div>
            <div class="cart-dropdown-content" id="cart-dropdown-content">
                <div class="empty-cart-message" id="empty-cart-message">
                    <i class="fas fa-shopping-cart"></i>
                    <p>{% trans "Кошик порожній" %}</p>
                </div>
            </div>
            <div class="cart-dropdown-footer">
                <a href="{% url 'shop:cart_detail' %}" class="btn btn-primary btn-sm w-100">
                    {% trans "Переглянути кошик" %}
                </a>
            </div>
        </div>
    </div>

</div>
</div>
    </div>
</div>

<style>
/* Стилі для віджета кошика */
.cart-widget-container {
    position: relative;
    display: inline-block;
    margin-left: 20px;
}

.cart-widget {
    position: relative;
}

.cart-link {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: #333;
    padding: 10px 15px;
    border-radius: 8px;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid transparent;
}

.cart-link:hover {
    background: #007bff;
    color: white;
    border-color: #007bff;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
}

.cart-icon-wrapper {
    position: relative;
    margin-right: 10px;
}

.cart-icon {
    width: 24px;
    height: 24px;
    transition: transform 0.3s ease;
}

.cart-link:hover .cart-icon {
    transform: scale(1.1);
}

.cart-counter {
    position: absolute;
    top: -8px;
    right: -8px;
    background: #e74c3c;
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    font-size: 12px;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 20px;
    animation: pulse 0.3s ease;
}

.cart-counter.updated {
    animation: bounce 0.5s ease;
}

.cart-info {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

.cart-text {
    font-weight: 500;
    font-size: 14px;
    line-height: 1;
}

.cart-total {
    font-size: 12px;
    color: #666;
    font-weight: 600;
}

.cart-link:hover .cart-total {
    color: rgba(255, 255, 255, 0.9);
}

/* Dropdown стилі */
.cart-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    width: 350px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.3s ease;
    z-index: 1000;
    border: 1px solid #e9ecef;
    margin-top: 10px;
}

.cart-widget:hover .cart-dropdown {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.cart-dropdown-header {
    padding: 15px 20px 10px;
    border-bottom: 1px solid #f1f3f4;
}

.cart-dropdown-header h5 {
    margin: 0;
    font-size: 16px;
    color: #333;
}

.cart-dropdown-content {
    max-height: 300px;
    overflow-y: auto;
    padding: 10px 0;
}

.cart-item-mini {
    display: flex;
    align-items: center;
    padding: 10px 20px;
    border-bottom: 1px solid #f8f9fa;
    transition: background-color 0.2s ease;
}

.cart-item-mini:hover {
    background-color: #f8f9fa;
}

.cart-item-mini:last-child {
    border-bottom: none;
}

.cart-item-image {
    width: 40px;
    height: 40px;
    object-fit: cover;
    border-radius: 6px;
    margin-right: 10px;
}

.cart-item-details {
    flex: 1;
}

.cart-item-name {
    font-size: 13px;
    font-weight: 500;
    margin: 0 0 2px 0;
    color: #333;
    line-height: 1.2;
}

.cart-item-info {
    font-size: 11px;
    color: #666;
}

.cart-item-price {
    font-size: 13px;
    font-weight: 600;
    color: #007bff;
}

.empty-cart-message {
    text-align: center;
    padding: 30px 20px;
    color: #999;
}

.empty-cart-message i {
    font-size: 32px;
    margin-bottom: 10px;
    display: block;
}

.empty-cart-message p {
    margin: 0;
    font-size: 14px;
}

.cart-dropdown-footer {
    padding: 15px 20px;
    border-top: 1px solid #f1f3f4;
    background: #f8f9fa;
    border-radius: 0 0 12px 12px;
}

.cart-dropdown-total {
    text-align: center;
    margin-bottom: 10px;
    font-weight: 600;
    color: #333;
}

/* Анімації */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

@keyframes bounce {
    0%, 20%, 53%, 80%, 100% { transform: scale(1); }
    40%, 43% { transform: scale(1.3); }
    70% { transform: scale(1.1); }
}

/* Адаптивність */
@media (max-width: 768px) {
    .cart-dropdown {
        width: 300px;
        right: -50px;
    }
    
    .cart-info {
        display: none;
    }
    
    .cart-link {
        padding: 8px 12px;
    }
}

@media (max-width: 480px) {
    .cart-dropdown {
        width: 280px;
        right: -100px;
    }
}

/* Стрілка dropdown */
.cart-dropdown::before {
    content: '';
    position: absolute;
    top: -8px;
    right: 20px;
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-bottom: 8px solid white;
}
</style>
